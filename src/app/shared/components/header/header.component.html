<header class="header">
  <div class="header-container">
    <!-- Logo -->
    <a routerLink="/" class="logo">
      <div class="logo-container">
        <div class="logo-main">
          <img src="assets/icons/logo.png" alt="PyTrade Logo" class="logo-img">
          <span class="logo-text">PyTrade <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stock-icon"><path d="M3 3v18h18"></path><path d="M8 17l4-8 4 4 4-10"></path></svg></span>
        </div>
      </div>
    </a>

    <!-- Navigation for desktop -->
    <nav class="nav-desktop">
      <ul class="nav-list">
        <li><a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Home</a></li>
        <li><a routerLink="/market-overview" routerLinkActive="active">Market Overview</a></li>
        <li><a routerLink="/indices" routerLinkActive="active">Indices</a></li>
        <li><a routerLink="/stocks" routerLinkActive="active">Stocks</a></li>
        <li><a routerLink="/tools" routerLinkActive="active">Smart Trade</a></li>
      </ul>
    </nav>

    <!-- Search component -->
    <div class="search-container">
      <app-stock-search></app-stock-search>
    </div>

    <!-- Mobile menu button -->
    <button class="menu-button" (click)="toggleMenu()" aria-label="Toggle menu">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>

    <!-- Mobile menu -->
    <div class="mobile-menu" [class.open]="isMenuOpen">
      <div class="mobile-menu-header">
        <div class="mobile-branding">
          <span class="menu-title">PyTrade</span>
        </div>
        <button class="close-button" (click)="closeMenu()" aria-label="Close menu">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <nav class="mobile-nav">
        <ul class="mobile-nav-list">
          <li><a (click)="navigateTo('/')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Home</a></li>
          <li><a (click)="navigateTo('/market-overview')" routerLinkActive="active">Market Overview</a></li>
          <li><a (click)="navigateTo('/indices')" routerLinkActive="active">Indices</a></li>
          <li><a (click)="navigateTo('/stocks')" routerLinkActive="active">Stocks</a></li>
          <li><a (click)="navigateTo('/tools')" routerLinkActive="active">Smart Trade</a></li>
          <li class="nav-divider"></li>
          <li *ngIf="!isLoggedIn"><a (click)="navigateTo('/login')">Login</a></li>
          <li *ngIf="isLoggedIn"><a (click)="logout()">Logout</a></li>
        </ul>
      </nav>
      <div class="mobile-search">
        <app-stock-search></app-stock-search>
      </div>
    </div>

    <!-- User info / login -->
    <div class="user-section">
      <ng-container *ngIf="isLoggedIn; else loginTemplate">
        <div class="user-info">
          <span class="username">{{ username }}</span>
          <button class="logout-btn" (click)="logout()">Logout</button>
        </div>
      </ng-container>
      <ng-template #loginTemplate>
        <a routerLink="/login" class="login-btn">Login</a>
      </ng-template>
    </div>
  </div>
</header>

<!-- Overlay for when mobile menu is open -->
<div class="menu-overlay" [class.active]="isMenuOpen" (click)="closeMenu()"></div>
